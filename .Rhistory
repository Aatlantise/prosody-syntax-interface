mutate(parse_token = rep(parse_tokens, times = n_distinct(model)))
plot2 <- ggplot(df, aes(x = token, y = surprisal, color = model)) +
geom_line(linewidth = 0.9) +
geom_point(size = 1.3) +
scale_x_continuous(
breaks = df$token[df$model == "Text"],  # label once
labels = parse_tokens
) +
labs(
x = "Linearized parse tokens",
y = "Surprisal (nats)",
title = "Token-level surprisal for syntactic parse prediction",
subtitle = "Sentence: She spoils the room.\npause = [0.0, 0.0, 0.0, 0.03]\nduration = [0.1, 0.62, 0.11, 0.47]",
color = "Input modality"
) +
theme_bw(base_size = 12) +
geom_vline(
xintercept = which(parse_tokens %in% c("NP", "VP", "PP")),
linetype = "dotted",
alpha = 0.3
) +
theme(
axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)
)
ggsave("line.pdf", plot2, width = 8, height = 6, dpi = 300)
library(dplyr)
library(tidyr)
library(ggplot2)
library(tidyverse)
pause <- c(
1.3494e+02, 1.6120e+01, 1.8570e+01, 8.2001e+00, 1.2262e+01, 7.8137e+00,
1.7517e+01, 1.1842e+01, 2.1362e+01, 9.1493e+00, 5.1205e+00, 1.1137e+01,
1.0526e+01, 2.9714e+00, 2.6602e+00, 3.5683e-02, 6.1109e+00, 6.2387e+00,
6.2532e-02, 1.7106e+01
)
duration <- c(
7.7048e+01, 2.4175e+01, 3.8587e+01, 7.9091e+00, 1.1917e+01, 8.1906e+00,
1.4292e+01, 1.0635e+01, 1.7569e+01, 9.2669e+00, 5.2948e+00, 1.3537e+01,
1.0473e+01, 2.9262e+00, 3.9214e+00, 5.8946e-02, 1.0215e+01, 2.9890e+00,
5.4596e-05, 1.4885e+01
)
text <- c(
1.2933e+02, 1.8969e+01, 1.9214e+01, 1.0138e+01, 1.0440e+01, 1.3908e+01,
2.7841e+01, 1.3639e+01, 2.3455e+01, 1.5904e+01, 3.8959e+01, 1.6199e+01,
1.4175e+01, 1.2845e+01, 1.4801e+01, 6.0797e-06, 1.3730e+01, 1.1808e+01,
1.1921e-07, 1.6998e+01
)
text_pause <- c(
6.6207e+01, 2.1974e+01, 2.9423e+01, 1.0210e+01, 1.7380e+01, 5.6614e+00,
1.5957e+01, 1.1032e+01, 2.0680e+01, 1.4487e+01, 3.0261e+01, 1.3003e+01,
8.7176e+00, 1.2503e+01, 1.2712e+01, 3.8861e-05, 9.9529e+00, 8.7865e+00,
4.0531e-06, 1.6743e+01
)
text_duration <- c(
3.8812e+01, 1.9456e+01, 2.8409e+01, 1.3064e+01, 1.8428e+01, 1.0637e+01,
1.8497e+01, 8.4712e+00, 2.2586e+01, 1.2645e+01, 2.3399e+01, 1.3303e+01,
1.3420e+01, 1.0573e+01, 9.7807e+00, 7.7563e-04, 7.1603e+00, 8.4226e+00,
4.2199e-05, 1.5863e+01
)
parse_tokens <- c(
"(", "ROOT",
"(", "S",
"(", "NP", "PRP", ")",
"(", "VP", "VBZ",
"(", "NP", "DT", "NN", ")",
")",
".",
")",
")"
)
df <- tibble(
token = seq_along(pause),
Pause = pause,
Duration = duration,
Text = text,
`Text + Pause` = text_pause,
`Text + Duration` = text_duration
) |>
pivot_longer(
cols = -token,
names_to = "model",
values_to = "surprisal"
)
df <- df |>
mutate(parse_token = rep(parse_tokens, times = n_distinct(model)))
plot2 <- ggplot(df, aes(x = token, y = surprisal, color = model)) +
geom_line(linewidth = 0.9) +
geom_point(size = 1.3) +
scale_x_continuous(
breaks = df$token[df$model == "Text"],  # label once
labels = parse_tokens
) +
labs(
x = "Linearized parse tokens",
y = "Surprisal (nats)",
title = "Token-level surprisal for syntactic parse prediction",
subtitle = "Sentence = She spoils the room.\nPause = [0.0, 0.0, 0.0, 0.03]\nDuration = [0.1, 0.62, 0.11, 0.47]",
color = "Input modality"
) +
theme_bw(base_size = 12) +
geom_vline(
xintercept = which(parse_tokens %in% c("NP", "VP", "PP")),
linetype = "dotted",
alpha = 0.3
) +
theme(
axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)
)
ggsave("line.pdf", plot2, width = 8, height = 6, dpi = 300)
knitr::opts_chunk$set(echo = TRUE)
library(dplyr)
library(tidyr)
library(ggplot2)
library(tidyverse)
pause <- c(
1.3494e+02, 1.6120e+01, 1.8570e+01, 8.2001e+00, 1.2262e+01, 7.8137e+00,
1.7517e+01, 1.1842e+01, 2.1362e+01, 9.1493e+00, 5.1205e+00, 1.1137e+01,
1.0526e+01, 2.9714e+00, 2.6602e+00, 3.5683e-02, 6.1109e+00, 6.2387e+00,
6.2532e-02, 1.7106e+01
)
duration <- c(
7.7048e+01, 2.4175e+01, 3.8587e+01, 7.9091e+00, 1.1917e+01, 8.1906e+00,
1.4292e+01, 1.0635e+01, 1.7569e+01, 9.2669e+00, 5.2948e+00, 1.3537e+01,
1.0473e+01, 2.9262e+00, 3.9214e+00, 5.8946e-02, 1.0215e+01, 2.9890e+00,
5.4596e-05, 1.4885e+01
)
text <- c(
1.2933e+02, 1.8969e+01, 1.9214e+01, 1.0138e+01, 1.0440e+01, 1.3908e+01,
2.7841e+01, 1.3639e+01, 2.3455e+01, 1.5904e+01, 3.8959e+01, 1.6199e+01,
1.4175e+01, 1.2845e+01, 1.4801e+01, 6.0797e-06, 1.3730e+01, 1.1808e+01,
1.1921e-07, 1.6998e+01
)
text_pause <- c(
6.6207e+01, 2.1974e+01, 2.9423e+01, 1.0210e+01, 1.7380e+01, 5.6614e+00,
1.5957e+01, 1.1032e+01, 2.0680e+01, 1.4487e+01, 3.0261e+01, 1.3003e+01,
8.7176e+00, 1.2503e+01, 1.2712e+01, 3.8861e-05, 9.9529e+00, 8.7865e+00,
4.0531e-06, 1.6743e+01
)
text_duration <- c(
3.8812e+01, 1.9456e+01, 2.8409e+01, 1.3064e+01, 1.8428e+01, 1.0637e+01,
1.8497e+01, 8.4712e+00, 2.2586e+01, 1.2645e+01, 2.3399e+01, 1.3303e+01,
1.3420e+01, 1.0573e+01, 9.7807e+00, 7.7563e-04, 7.1603e+00, 8.4226e+00,
4.2199e-05, 1.5863e+01
)
parse_tokens <- c(
"(", "ROOT",
"(", "S",
"(", "NP", "PRP", ")",
"(", "VP", "VBZ",
"(", "NP", "DT", "NN", ")",
")",
".",
")",
")"
)
df <- tibble(
token = seq_along(pause),
Pause = pause,
Duration = duration,
Text = text,
`Text + Pause` = text_pause,
`Text + Duration` = text_duration
) |>
pivot_longer(
cols = -token,
names_to = "model",
values_to = "surprisal"
)
df <- df |>
mutate(parse_token = rep(parse_tokens, times = n_distinct(model)))
plot2 <- ggplot(df, aes(x = token, y = surprisal, color = model)) +
geom_line(linewidth = 0.9) +
geom_point(size = 1.3) +
scale_x_continuous(
breaks = df$token[df$model == "Text"],  # label once
labels = parse_tokens
) +
labs(
x = "Linearized parse tokens",
y = "Surprisal (nats)",
title = "Token-level surprisal for syntactic parse prediction",
subtitle = "Sentence = She spoils the room.\nPause = [0.0, 0.0, 0.0, 0.03]\nDuration = [0.1, 0.62, 0.11, 0.47]",
color = "Input modality"
) +
theme_bw(base_size = 12) +
geom_vline(
xintercept = which(parse_tokens %in% c("NP", "VP", "PP")),
linetype = "dotted",
alpha = 0.3
) +
theme(
axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)
)
ggsave("line.pdf", plot2, width = 8, height = 4, dpi = 300)
library(dplyr)
library(tidyr)
library(ggplot2)
library(tidyverse)
pause <- c(
1.3494e+02, 1.6120e+01, 1.8570e+01, 8.2001e+00, 1.2262e+01, 7.8137e+00,
1.7517e+01, 1.1842e+01, 2.1362e+01, 9.1493e+00, 5.1205e+00, 1.1137e+01,
1.0526e+01, 2.9714e+00, 2.6602e+00, 3.5683e-02, 6.1109e+00, 6.2387e+00,
6.2532e-02, 1.7106e+01
)
duration <- c(
7.7048e+01, 2.4175e+01, 3.8587e+01, 7.9091e+00, 1.1917e+01, 8.1906e+00,
1.4292e+01, 1.0635e+01, 1.7569e+01, 9.2669e+00, 5.2948e+00, 1.3537e+01,
1.0473e+01, 2.9262e+00, 3.9214e+00, 5.8946e-02, 1.0215e+01, 2.9890e+00,
5.4596e-05, 1.4885e+01
)
text <- c(
1.2933e+02, 1.8969e+01, 1.9214e+01, 1.0138e+01, 1.0440e+01, 1.3908e+01,
2.7841e+01, 1.3639e+01, 2.3455e+01, 1.5904e+01, 3.8959e+01, 1.6199e+01,
1.4175e+01, 1.2845e+01, 1.4801e+01, 6.0797e-06, 1.3730e+01, 1.1808e+01,
1.1921e-07, 1.6998e+01
)
text_pause <- c(
6.6207e+01, 2.1974e+01, 2.9423e+01, 1.0210e+01, 1.7380e+01, 5.6614e+00,
1.5957e+01, 1.1032e+01, 2.0680e+01, 1.4487e+01, 3.0261e+01, 1.3003e+01,
8.7176e+00, 1.2503e+01, 1.2712e+01, 3.8861e-05, 9.9529e+00, 8.7865e+00,
4.0531e-06, 1.6743e+01
)
text_duration <- c(
3.8812e+01, 1.9456e+01, 2.8409e+01, 1.3064e+01, 1.8428e+01, 1.0637e+01,
1.8497e+01, 8.4712e+00, 2.2586e+01, 1.2645e+01, 2.3399e+01, 1.3303e+01,
1.3420e+01, 1.0573e+01, 9.7807e+00, 7.7563e-04, 7.1603e+00, 8.4226e+00,
4.2199e-05, 1.5863e+01
)
parse_tokens <- c(
"(", "ROOT",
"(", "S",
"(", "NP", "PRP", ")",
"(", "VP", "VBZ",
"(", "NP", "DT", "NN", ")",
")",
".",
")",
")"
)
df <- tibble(
token = seq_along(pause),
Pause = pause,
Duration = duration,
Text = text,
`Text + Pause` = text_pause,
`Text + Duration` = text_duration
) |>
pivot_longer(
cols = -token,
names_to = "model",
values_to = "surprisal"
)
df <- df |>
mutate(parse_token = rep(parse_tokens, times = n_distinct(model)))
plot2 <- ggplot(df, aes(x = token, y = surprisal, color = model)) +
geom_line(linewidth = 0.9) +
geom_point(size = 1.3) +
scale_x_continuous(
breaks = df$token[df$model == "Text"],  # label once
labels = parse_tokens
) +
labs(
x = "Linearized parse tokens",
y = "Surprisal (nats)",
title = "Token-level surprisal for syntactic parse prediction",
subtitle = "Sentence = She spoils the room.\nPause = [0.0, 0.0, 0.0, 0.03]; Duration = [0.1, 0.62, 0.11, 0.47]",
color = "Input modality"
) +
theme_bw(base_size = 12) +
geom_vline(
xintercept = which(parse_tokens %in% c("NP", "VP", "PP")),
linetype = "dotted",
alpha = 0.3
) +
theme(
axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)
)
ggsave("line.pdf", plot2, width = 8, height = 3, dpi = 300)
library(dplyr)
library(tidyr)
library(ggplot2)
library(tidyverse)
pause <- c(
1.3494e+02, 1.6120e+01, 1.8570e+01, 8.2001e+00, 1.2262e+01, 7.8137e+00,
1.7517e+01, 1.1842e+01, 2.1362e+01, 9.1493e+00, 5.1205e+00, 1.1137e+01,
1.0526e+01, 2.9714e+00, 2.6602e+00, 3.5683e-02, 6.1109e+00, 6.2387e+00,
6.2532e-02, 1.7106e+01
)
duration <- c(
7.7048e+01, 2.4175e+01, 3.8587e+01, 7.9091e+00, 1.1917e+01, 8.1906e+00,
1.4292e+01, 1.0635e+01, 1.7569e+01, 9.2669e+00, 5.2948e+00, 1.3537e+01,
1.0473e+01, 2.9262e+00, 3.9214e+00, 5.8946e-02, 1.0215e+01, 2.9890e+00,
5.4596e-05, 1.4885e+01
)
text <- c(
1.2933e+02, 1.8969e+01, 1.9214e+01, 1.0138e+01, 1.0440e+01, 1.3908e+01,
2.7841e+01, 1.3639e+01, 2.3455e+01, 1.5904e+01, 3.8959e+01, 1.6199e+01,
1.4175e+01, 1.2845e+01, 1.4801e+01, 6.0797e-06, 1.3730e+01, 1.1808e+01,
1.1921e-07, 1.6998e+01
)
text_pause <- c(
6.6207e+01, 2.1974e+01, 2.9423e+01, 1.0210e+01, 1.7380e+01, 5.6614e+00,
1.5957e+01, 1.1032e+01, 2.0680e+01, 1.4487e+01, 3.0261e+01, 1.3003e+01,
8.7176e+00, 1.2503e+01, 1.2712e+01, 3.8861e-05, 9.9529e+00, 8.7865e+00,
4.0531e-06, 1.6743e+01
)
text_duration <- c(
3.8812e+01, 1.9456e+01, 2.8409e+01, 1.3064e+01, 1.8428e+01, 1.0637e+01,
1.8497e+01, 8.4712e+00, 2.2586e+01, 1.2645e+01, 2.3399e+01, 1.3303e+01,
1.3420e+01, 1.0573e+01, 9.7807e+00, 7.7563e-04, 7.1603e+00, 8.4226e+00,
4.2199e-05, 1.5863e+01
)
parse_tokens <- c(
"(", "ROOT",
"(", "S",
"(", "NP", "PRP", ")",
"(", "VP", "VBZ",
"(", "NP", "DT", "NN", ")",
")",
".",
")",
")"
)
df <- tibble(
token = seq_along(pause),
Pause = pause,
Duration = duration,
Text = text,
`Text + Pause` = text_pause,
`Text + Duration` = text_duration
) |>
pivot_longer(
cols = -token,
names_to = "model",
values_to = "surprisal"
)
df <- df |>
mutate(parse_token = rep(parse_tokens, times = n_distinct(model)))
plot2 <- ggplot(df, aes(x = token, y = surprisal, color = model)) +
geom_line(linewidth = 0.9) +
geom_point(size = 1.3) +
scale_x_continuous(
breaks = df$token[df$model == "Text"],  # label once
labels = parse_tokens
) +
labs(
x = "Linearized parse tokens",
y = "Surprisal (nats)",
title = "Token-level surprisal for syntactic parse prediction",
subtitle = "Sentence = She spoils the room.\nPause = [0.0, 0.0, 0.0, 0.03]; Duration = [0.1, 0.62, 0.11, 0.47]",
color = "Input modality"
) +
theme_bw(base_size = 12) +
geom_vline(
xintercept = which(parse_tokens %in% c("NP", "VP", "PP")),
linetype = "dotted",
alpha = 0.3
) +
theme(
axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)
)
ggsave("line.pdf", plot2, width = 8, height = 4, dpi = 300)
library(dplyr)
library(tidyr)
library(ggplot2)
library(tidyverse)
pause <- c(
1.3494e+02, 1.6120e+01, 1.8570e+01, 8.2001e+00, 1.2262e+01, 7.8137e+00,
1.7517e+01, 1.1842e+01, 2.1362e+01, 9.1493e+00, 5.1205e+00, 1.1137e+01,
1.0526e+01, 2.9714e+00, 2.6602e+00, 3.5683e-02, 6.1109e+00, 6.2387e+00,
6.2532e-02, 1.7106e+01
)
duration <- c(
7.7048e+01, 2.4175e+01, 3.8587e+01, 7.9091e+00, 1.1917e+01, 8.1906e+00,
1.4292e+01, 1.0635e+01, 1.7569e+01, 9.2669e+00, 5.2948e+00, 1.3537e+01,
1.0473e+01, 2.9262e+00, 3.9214e+00, 5.8946e-02, 1.0215e+01, 2.9890e+00,
5.4596e-05, 1.4885e+01
)
text <- c(
1.2933e+02, 1.8969e+01, 1.9214e+01, 1.0138e+01, 1.0440e+01, 1.3908e+01,
2.7841e+01, 1.3639e+01, 2.3455e+01, 1.5904e+01, 3.8959e+01, 1.6199e+01,
1.4175e+01, 1.2845e+01, 1.4801e+01, 6.0797e-06, 1.3730e+01, 1.1808e+01,
1.1921e-07, 1.6998e+01
)
text_pause <- c(
6.6207e+01, 2.1974e+01, 2.9423e+01, 1.0210e+01, 1.7380e+01, 5.6614e+00,
1.5957e+01, 1.1032e+01, 2.0680e+01, 1.4487e+01, 3.0261e+01, 1.3003e+01,
8.7176e+00, 1.2503e+01, 1.2712e+01, 3.8861e-05, 9.9529e+00, 8.7865e+00,
4.0531e-06, 1.6743e+01
)
text_duration <- c(
3.8812e+01, 1.9456e+01, 2.8409e+01, 1.3064e+01, 1.8428e+01, 1.0637e+01,
1.8497e+01, 8.4712e+00, 2.2586e+01, 1.2645e+01, 2.3399e+01, 1.3303e+01,
1.3420e+01, 1.0573e+01, 9.7807e+00, 7.7563e-04, 7.1603e+00, 8.4226e+00,
4.2199e-05, 1.5863e+01
)
parse_tokens <- c(
"(", "ROOT",
"(", "S",
"(", "NP", "PRP", ")",
"(", "VP", "VBZ",
"(", "NP", "DT", "NN", ")",
")",
".",
")",
")"
)
df <- tibble(
token = seq_along(pause),
Pause = pause,
Duration = duration,
Text = text,
`Text + Pause` = text_pause,
`Text + Duration` = text_duration
) |>
pivot_longer(
cols = -token,
names_to = "model",
values_to = "surprisal"
)
df <- df |>
mutate(parse_token = rep(parse_tokens, times = n_distinct(model)))
plot2 <- ggplot(df, aes(x = token, y = surprisal, color = model)) +
geom_line(linewidth = 0.9) +
geom_point(size = 1.3) +
scale_x_continuous(
breaks = df$token[df$model == "Text"],  # label once
labels = parse_tokens
) +
labs(
x = "Linearized parse tokens",
y = "Surprisal (nats)",
title = "Token-level surprisal for syntactic parse prediction",
subtitle = "Sentence = She spoils the room.\nPause = [0.0, 0.0, 0.0, 0.03]; Duration = [0.1, 0.62, 0.11, 0.47]",
color = "Input modality"
) +
theme_bw(base_size = 12) +
geom_vline(
xintercept = which(parse_tokens %in% c("NP", "VP", "PP")),
linetype = "dotted",
alpha = 0.3
) +
theme(
axis.text.x = element_text(angle = 90, vjust = 0.5, hjust = 1)
)
ggsave("line.pdf", plot2, width = 8, height = 4, dpi = 300)
library(tidyverse)
library(ggplot2)
library(dplyr)
library(ggbreak)
df <- data.frame(
condition = c(
"H(S)\nAutoreg. parse",
"H(S|pause)\nPause",
"H(S|dur)\nDuration",
"H(S|W)\nText",
"H(S|W,pause)\nPause + Text",
"H(S|W,dur)\nDuration + Text"
),
nats_seq = c(61.39,59.87,58.40,15.91,15.84,16.59
),
stdev = c(0.98,2.01,1.61,0.65,0.49,1.15
),
mi = c(NaN, 1.52, 2.99, 45.48, 45.55, 44.81
),
mi_given_text = c(NaN, NaN, NaN, NaN, 0.07, -0.68)
)
get_label <- function(mi, word_context = FALSE) {
out <- character(length(mi))   # always return a character vector
# non-NaN positions
ok <- !is.nan(mi)
if (word_context) {
out[ok] <- sprintf("MI(X,S|W) = %.1f", mi[ok])
} else {
out[ok] <- sprintf("MI(X,S) = %.1f", mi[ok])
}
out
}
df$mi_label <- get_label(df$mi)
df$mi_text_label <- get_label(df$mi_given_text, word_context=TRUE)
# Order factors for prettier plotting
df$condition <- factor(df$condition, levels = df$condition)
plot1 <- ggplot(df, aes(x = condition, y = nats_seq)) +
geom_col(fill = "#556B8F") +
geom_errorbar(
aes(
ymin = nats_seq - stdev,
ymax = nats_seq + stdev
),
width = 0.25,
linewidth = 0.4
) +
geom_text(aes(y = nats_seq + stdev + 0.8, label = mi_label),
size = 3.2) +
geom_text(aes(y = nats_seq + stdev + 2.0, label = mi_text_label),
size = 3.2) +
scale_y_continuous(
limits=c(0, 65),
breaks = seq(0, 65, by = 2),
minor_breaks = seq(0, 65, by = 1),
) +
scale_y_break(c(22, 55)) +
labs(
x = "Context mode (input to the syntax prediction model)",
y = "Entropy (nats per sequence)",
title = "Entropy in predicted syntactic structure given context mode",
) +
geom_hline(yintercept=61.39, linetype="dashed") +
geom_hline(yintercept=15.91, linetype="dashed") +
theme_bw(base_size = 12)
plot1
ggsave("bar.pdf", plot1, width = 8, height = 5, dpi = 300)
